<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="stile.css">
    <title>Document</title>
</head>
<body>

    <div class="main">
        <div class="text">
            <h1 class="text-tittle">Currency Converter</h1>
            <p class="text-description">Check live rates, set rate alerts, receive notifications and more.</p>
        </div>
        
        <div class="window">
            <div class="section">
                <div class="dropdown">
                    <h3 class="dropdown-header Amount-header">Amount</h3>
                    <div class="currency-select">
                        <img src="./img/SGD 1.png" alt="SGD" class="flag">
                        <span class="currency-code">SGD</span>
                        <span class="dropdown-arrow">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="24" height="24" opacity="0.5" fill="none">
                                <rect width="24" height="24" fill="rgb(255,255,255)" fill-opacity="0" />
                                <path d="M16.293 9.293L12 13.586L7.707 9.293L6.293 10.707L12 16.414L17.707 10.707L16.293 9.293Z" fill="rgb(59.5,59.5,59.5)" fill-rule="nonzero" />
                            </svg>
                        </span>
                    </div>
                    <div class="dropdown-content">
                        <div class="dropdown-option" data-currency="USD">
                            <img src="./img/512px-United-states_flag_icon_round 1.png" alt="USD" class="flag">
                            <span class="currency-code">USD</span>
                            <span class="currency-name">US Dollar</span>
                        </div>
                        <div class="dropdown-option" data-currency="EUR">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b7/Flag_of_Europe.svg/800px-Flag_of_Europe.svg.png" alt="EUR" class="flag">
                            <span class="currency-code">EUR</span>
                            <span class="currency-name">Euro</span>
                        </div>
                        <div class="dropdown-option" data-currency="GBP">
                            <img src="https://liquipedia.net/commons/images/e/ea/Flag_of_Great_Britain_4_by_3.png" alt="GBP" class="flag">
                            <span class="currency-code">GBP</span>
                            <span class="currency-name">British Pound</span>
                        </div>
                        <div class="dropdown-option" data-currency="JPY">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Flag_of_Japan.svg/640px-Flag_of_Japan.svg.png" alt="JPY" class="flag">
                            <span class="currency-code">JPY</span>
                            <span class="currency-name">Japanese Yen</span>
                        </div>
                        <div class="dropdown-option" data-currency="RUB">
                            <img src="https://www.ghpa.ru/media/zoo/images/photo_2022-08-22_14-30-19_1336a46df3497b7e38e2d89c0be1d608.jpg" alt="RUB" class="flag">
                            <span class="currency-code">RUB</span>
                            <span class="currency-name">Russian RUB</span>
                        </div>
                        <div class="dropdown-option" data-currency="CNY">
                            <img src="./img/5258328426593063048.jpg" alt="CNY" class="flag">
                            <span class="currency-code">CNY</span>
                            <span class="currency-name">China CNY</span>
                        </div>
                        <div class="dropdown-option" data-currency="SGD">
                            <img src="./img/SGD 1.png" alt="SGD" class="flag">
                            <span class="currency-code">SGD</span>
                            <span class="currency-name">Singapore dollar</span>
                        </div>
                    </div>
                </div>
                <input type="text" class="amount-input amount-input-first" placeholder="0.00" value="1000.00" inputmode="decimal">
            </div>

            <div class="exchange-indicator">
                <button class="exchange-arrow">
                    <svg viewBox="0 0 14.5462 20" xmlns="http://www.w3.org/2000/svg" width="14.546236" height="20.000000" fill="none" customFrame="#000000">
                        <g id="Group">
                            <path id="Vector" d="M8.51036 13.75C8.51036 14.0214 8.59871 14.2855 8.76205 14.5022C8.92539 14.719 9.15485 14.8767 9.41576 14.9516C9.67666 15.0264 9.95484 15.0143 10.2082 14.917C10.4616 14.8198 10.6765 14.6427 10.8204 14.4125L14.1804 11.0537C14.2964 10.9376 14.3885 10.7998 14.4512 10.648C14.514 10.4963 14.5463 10.3337 14.5462 10.1696C14.5462 10.0054 14.5138 9.84281 14.4509 9.69114C14.388 9.53947 14.2959 9.40168 14.1797 9.28562C14.0636 9.16957 13.9257 9.07752 13.774 9.01475C13.6223 8.95197 13.4597 8.91969 13.2955 8.91975C13.1314 8.9198 12.9688 8.9522 12.8171 9.01509C12.6655 9.07797 12.5277 9.17011 12.4116 9.28625L11.0116 10.6862L11.0116 1.25C11.0116 0.918479 10.8799 0.600537 10.6455 0.366117C10.4111 0.131696 10.0931 5.55111e-16 9.76161 0C9.43009 5.55111e-16 9.11215 0.131696 8.87773 0.366117C8.64331 0.600537 8.51161 0.918479 8.51161 1.25L8.51161 13.6875L8.51161 13.75L8.51036 13.75Z" fill="rgb(255,255,255)" fill-rule="nonzero" />
                            <path id="Vector" d="M6.05036 6.25C6.05036 5.97858 5.96201 5.71453 5.79867 5.49776C5.63533 5.28098 5.40587 5.12327 5.14496 5.04844C4.88406 4.97361 4.60588 4.98574 4.35248 5.08299C4.09908 5.18025 3.88421 5.35734 3.74036 5.58751L0.38161 8.94625C0.262222 9.06156 0.166994 9.1995 0.101483 9.352C0.0359717 9.50451 0.00148947 9.66853 4.71963e-05 9.8345C-0.00139507 10.0005 0.0302318 10.1651 0.0930829 10.3187C0.155934 10.4723 0.24875 10.6119 0.366116 10.7292C0.483482 10.8466 0.623047 10.9394 0.776668 11.0023C0.930288 11.0651 1.09489 11.0968 1.26086 11.0953C1.42684 11.0939 1.59086 11.0594 1.74337 10.9939C1.89587 10.9284 2.0338 10.8331 2.14911 10.7138L3.55036 9.31376L3.55036 18.75C3.55036 19.0815 3.68206 19.3995 3.91648 19.6339C4.1509 19.8683 4.46884 20 4.80036 20C5.13188 20 5.44982 19.8683 5.68424 19.6339C5.91866 19.3995 6.05036 19.0815 6.05036 18.75L6.05036 6.3125L6.05036 6.25Z" fill="rgb(255,255,255)" fill-rule="nonzero" />
                        </g>
                    </svg>
                </button>
            </div>

            <div class="section">
                <div class="dropdown">
                    <h3 class="dropdown-header converted-amount-header">Converted Amount</h3>
                    <div class="currency-select">
                        <img src="./img/512px-United-states_flag_icon_round 1.png" alt="USD" class="flag">
                        <span class="currency-code">USD</span>
                        <span class="dropdown-arrow">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="24" height="24" opacity="0.5" fill="none">
                                <rect width="24" height="24" fill="rgb(255,255,255)" fill-opacity="0" />
                                <path d="M16.293 9.293L12 13.586L7.707 9.293L6.293 10.707L12 16.414L17.707 10.707L16.293 9.293Z" fill="rgb(59.5,59.5,59.5)" fill-rule="nonzero" />
                            </svg>
                        </span>
                    </div>
                    <div class="dropdown-content">
                        <div class="dropdown-option" data-currency="USD">
                            <img src="./img/512px-United-states_flag_icon_round 1.png" alt="USD" class="flag">
                            <span class="currency-code">USD</span>
                            <span class="currency-name">US Dollar</span>
                        </div>
                        <div class="dropdown-option" data-currency="EUR">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b7/Flag_of_Europe.svg/800px-Flag_of_Europe.svg.png" alt="EUR" class="flag">
                            <span class="currency-code">EUR</span>
                            <span class="currency-name">Euro</span>
                        </div>
                        <div class="dropdown-option" data-currency="GBP">
                            <img src="https://liquipedia.net/commons/images/e/ea/Flag_of_Great_Britain_4_by_3.png" alt="GBP" class="flag">
                            <span class="currency-code">GBP</span>
                            <span class="currency-name">British Pound</span>
                        </div>
                        <div class="dropdown-option" data-currency="JPY">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Flag_of_Japan.svg/640px-Flag_of_Japan.svg.png" alt="JPY" class="flag">
                            <span class="currency-code">JPY</span>
                            <span class="currency-name">Japanese Yen</span>
                        </div>
                        <div class="dropdown-option" data-currency="RUB">
                            <img src="https://www.ghpa.ru/media/zoo/images/photo_2022-08-22_14-30-19_1336a46df3497b7e38e2d89c0be1d608.jpg" alt="RUB" class="flag">
                            <span class="currency-code">RUB</span>
                            <span class="currency-name">Russian RUB</span>
                        </div>
                        <div class="dropdown-option" data-currency="CNY">
                            <img src="./img/5258328426593063048.jpg" alt="CNY" class="flag">
                            <span class="currency-code">CNY</span>
                            <span class="currency-name">China CNY</span>
                        </div>
                        <div class="dropdown-option" data-currency="SGD">
                            <img src="./img/SGD 1.png" alt="SGD" class="flag">
                            <span class="currency-code">SGD</span>
                            <span class="currency-name">Singapore dollar</span>
                        </div>
                    </div>
                </div>
                <input type="text" class="amount-input amount-input-second" placeholder="0.00" value="736.70" inputmode="decimal">
            </div>
        </div>
        <div class="course">
            <h3 class="course-text">Indicative Exchange Rate</h3>
            <div class="currency">
                <p class="currency-text">1 SGD = 0.7367 USD</p>
            </div>
        </div>
    <script defer>
// Глобальная база курсов валют
let exchangeRates = {
    "SGD": 1,
    "USD": 0.74,
    "EUR": 0.68,
    "GBP": 0.58,
    "JPY": 110.5,
    "RUB": 67.8,
    "CNY": 5.35
};

// Функция для форматирования числа с точкой
function formatNumber(value) {
    return parseFloat(value).toFixed(2);
}

// Функция для получения числового значения
function getNumberValue(input) {
    const value = input.value.replace(',', '.');
    return parseFloat(value) || 0;
}

// Функция для валидации ввода
function validateNumberInput(input) {
    // Разрешаем только цифры и точку
    input.value = input.value.replace(/[^\d.]/g, '');
    
    // Удаляем лишние точки
    const parts = input.value.split('.');
    if (parts.length > 2) {
        input.value = parts[0] + '.' + parts.slice(1).join('');
    }
    
    // Ограничиваем до 2 знаков после точки
    if (parts.length > 1 && parts[1].length > 2) {
        input.value = parts[0] + '.' + parts[1].substring(0, 2);
    }
}

// Основная функция конвертации
function convertCurrency() {
    const fromCurrency = document.querySelector('.section:first-child .currency-code').textContent;
    const toCurrency = document.querySelector('.section:last-child .currency-code').textContent;
    const amountInput = document.querySelector('.amount-input-first');
    const resultInput = document.querySelector('.amount-input-second');
    
    const amount = getNumberValue(amountInput);
    
    const rateFrom = exchangeRates[fromCurrency] || 1;
    const rateTo = exchangeRates[toCurrency] || 1;
    
    const convertedAmount = (amount / rateFrom) * rateTo;
    resultInput.value = formatNumber(convertedAmount);
    
    updateExchangeRate(fromCurrency, toCurrency, rateFrom, rateTo);
}

// Функция для обратной конвертации
function convertCurrencyReverse() {
    const fromCurrency = document.querySelector('.section:first-child .currency-code').textContent;
    const toCurrency = document.querySelector('.section:last-child .currency-code').textContent;
    const amountInput = document.querySelector('.amount-input-first');
    const resultInput = document.querySelector('.amount-input-second');
    
    const amount = getNumberValue(resultInput);
    
    const rateFrom = exchangeRates[fromCurrency] || 1;
    const rateTo = exchangeRates[toCurrency] || 1;
    
    const convertedAmount = (amount / rateTo) * rateFrom;
    amountInput.value = formatNumber(convertedAmount);
    
    updateExchangeRate(fromCurrency, toCurrency, rateFrom, rateTo);
}

// Функция для обновления курса валют
function updateExchangeRate(fromCurrency, toCurrency, rateFrom, rateTo) {
    const exchangeRate = (rateTo / rateFrom).toFixed(4);
    document.querySelector('.currency-text').textContent = `1 ${fromCurrency} = ${exchangeRate} ${toCurrency}`;
}

// Функция для обновления выбранной валюты
function updateSelectedCurrency(option, dropdown) {
    const currencyCode = option.getAttribute('data-currency');
    const flagSrc = option.querySelector('.flag').src;
    const currencyName = option.querySelector('.currency-code').textContent;
    
    const currencySelect = dropdown.querySelector('.currency-select');
    currencySelect.querySelector('.flag').src = flagSrc;
    currencySelect.querySelector('.currency-code').textContent = currencyName;
    
    dropdown.querySelector('.dropdown-content').style.display = 'none';
    convertCurrency();
}

// Реальный API для получения курсов валют
async function fetchRealExchangeRates() {
    try {
        // Используем бесплатный API (можете заменить на любой другой)
        const response = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
        const data = await response.json();
        
        // Обновляем базу курсов
        exchangeRates = data.rates;
        
        // Добавляем базовую валюту
        exchangeRates[data.base] = 1;
        
        console.log('Курсы обновлены:', exchangeRates);
        convertCurrency();
        
    } catch (error) {
        console.error('Ошибка получения курсов:', error);
        // Используем fallback данные если API не доступно
        useFallbackRates();
    }
}

// Fallback данные если API не доступно
function useFallbackRates() {
    exchangeRates = {
        "USD": 1,
        "EUR": 0.85,
        "GBP": 0.73,
        "JPY": 110.0,
        "CAD": 1.25,
        "AUD": 1.35,
        "CHF": 0.92,
        "CNY": 6.45,
        "SGD": 1.35,
        "RUB": 75.0
    };
    convertCurrency();
}

// Инициализация при загрузке
document.addEventListener('DOMContentLoaded', function() {
    // Инициализация обработчиков
    document.querySelectorAll('.dropdown-option').forEach(option => {
        option.addEventListener('click', function() {
            const dropdown = this.closest('.dropdown');
            updateSelectedCurrency(this, dropdown);
        });
    });

    // Обработчики для полей ввода
    document.querySelector('.amount-input-first').addEventListener('input', function() {
        validateNumberInput(this);
        convertCurrency();
    });

    document.querySelector('.amount-input-second').addEventListener('input', function() {
        validateNumberInput(this);
        convertCurrencyReverse();
    });

    // Показ/скрытие выпадающих списков
    document.querySelectorAll('.currency-select').forEach(select => {
        select.addEventListener('click', function(e) {
            e.stopPropagation();
            const dropdownContent = this.parentElement.querySelector('.dropdown-content');
            const isVisible = dropdownContent.style.display === 'block';
            
            document.querySelectorAll('.dropdown-content').forEach(content => {
                content.style.display = 'none';
            });
            
            dropdownContent.style.display = isVisible ? 'none' : 'block';
        });
    });

    // Закрытие выпадающих списков при клике вне
    document.addEventListener('click', function() {
        document.querySelectorAll('.dropdown-content').forEach(content => {
            content.style.display = 'none';
        });
    });

    // Обработчик для кнопки обмена валют
    document.querySelector('.exchange-arrow').addEventListener('click', function() {
        const fromSection = document.querySelector('.section:first-child');
        const toSection = document.querySelector('.section:last-child');
        
        const fromCurrencySelect = fromSection.querySelector('.currency-select');
        const toCurrencySelect = toSection.querySelector('.currency-select');
        
        const fromCurrencyImg = fromCurrencySelect.querySelector('.flag').src;
        const fromCurrencyCode = fromCurrencySelect.querySelector('.currency-code').textContent;
        
        const toCurrencyImg = toCurrencySelect.querySelector('.flag').src;
        const toCurrencyCode = toCurrencySelect.querySelector('.currency-code').textContent;
        
        fromCurrencySelect.querySelector('.flag').src = toCurrencyImg;
        fromCurrencySelect.querySelector('.currency-code').textContent = toCurrencyCode;
        
        toCurrencySelect.querySelector('.flag').src = fromCurrencyImg;
        toCurrencySelect.querySelector('.currency-code').textContent = fromCurrencyCode;
        
        convertCurrency();
    });

    // Загружаем реальные курсы валют
    fetchRealExchangeRates();
});

// Обновляем курсы каждые 5 минут
setInterval(fetchRealExchangeRates, 300000);
</script>
    </div>
</body>
</html>